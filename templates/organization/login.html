{% extends "layouts/base.html" %}

{% block content %}
<head>
    <meta name="google-signin-scope" content="profile email">
    <meta name="google-signin-client_id" content="649609603099-g73psa76kgviat4mdh2ctt1pk8he11bb.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
</head>
<body>
  <div class="container-outer">
    <div class="container">
      <div class="row">
        <div class="col-xs-12">
          <a class="pull-right" href="/">Return to homepage</a>
        </div>
      </div>
      <div class="row">
        <h2>Organization Sign-Up</h2>
      </div>
      <div class="g-signin2" data-onsuccess="onSignIn" redirect-uri="igninCallback" data-theme="dark"></div>
      <script>
        function onSignIn(googleUser) {
          // Useful data for client-side scripts:
          var profile = googleUser.getBasicProfile();
          console.log("ID: " + profile.getId()); // Don't send this directly to your server!
          console.log('Full Name: ' + profile.getName());
          console.log("Email: " + profile.getEmail());
  
          // The ID token you need to pass to your backend:
          var id_token = googleUser.getAuthResponse().id_token;
          console.log("ID Token: " + id_token)
        };

          function signinCallback(authResult) {
            if (authResult['access_token']) {
              // The user is signed in
              var loc = 'index.jsp?GoogleAuthToken=' + authResult['access_token'];
              window.location.href = loc;
              } else if (authResult['error']) {
              // There was an error, which means the user is not signed in.
              return false;
              }
          }
        </script>


        <a href="/" onclick="signOut();">Sign out</a>
        <script>
        function signOut() {
          var auth2 = gapi.auth2.getAuthInstance();
          auth2.signOut().then(function () {
            console.log('User signed out.');
          });
        }
      </script>

</body>
{% endblock %} 